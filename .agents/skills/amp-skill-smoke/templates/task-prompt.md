# Skill 冒烟测试 — SubAgent Prompt 模板

使用前将 `{{占位符}}` 替换为实际值。

---

你具备通用编程知识，但**必须**将所有 SDK/工具特定细节视为未知，除非能从下方允许的信息源中找到依据。

无法找到依据时，将该细节标记为 `unknown`，并：

- 避免使用它，或
- 说明你会查阅哪个信息源来确认。

## 文件隔离

**禁止**读取、Grep 或 glob 以下路径的任何文件：

{{FORBIDDEN_PATHS}}

**禁止**使用 `skill()` 工具加载任何 skill。所有信息必须来自下方列出的允许源。

若在 AGENTS.md 或 available_skills 中看到其他文件的引用，**不得**跟随访问，除非该文件明确列在允许源中。

## 任务

{{TASK_DESCRIPTION}}

## 信息源（仅限以下来源，按优先级排列）

1. 阅读 skill 文件：`{{SKILL_PATH}}`
2. 查阅 API 签名/类型/参考：`{{REFERENCE_SOURCES}}`
   （可能是 stubs、OpenAPI spec、README、生成文档等）
   **重要**：不要通读整个参考文件。用 Grep 定位与任务相关的类/方法，再 Read 对应行。
3. 若 skill 中引用了官方文档，可通过 `read_web_page` 获取

## 交付物

### Part 1：代码

编写完整、可运行的脚本。不要执行。

### Part 1.5：验证计划

给出验证命令（不要执行）：

- 类型检查/lint 命令
- 最小冒烟运行命令
- 所需环境变量
- 成功时的预期输出

### Part 2：自我反思（必填）

**A. 风险/陷阱检查（仅列相关项）**

1. 若 skill 中有"陷阱/注意事项/Checklist"章节：
   - 仅列出相关项（触及的、差点踩到的、高严重度的）。
   - 每项说明：(a) 为何相关，(b) 如何规避，(c) 引用原文并附简短引语。
   - 覆盖率：`相关项/总项`，`差点踩坑数`。

2. 若 skill 中无此章节：
   - 基于 skill 和任务约束，列出最多 8 项风险清单。

**B. 来源可追溯性（须有证据）**

为每个 import、API 调用、属性/字段访问提供：

- element：`<代码片段>`
- source：`skill:Lx-Ly` 或 `ref:Lx-Ly` 或 `docs:<url>`
- evidence：附上该来源的简短引语

找不到的标记 `unknown`（禁止猜测）。

末尾汇报覆盖率：

- total_elements：
- cited_elements：
- unknown_elements：

**C. 反事实推演（必须具体）**

列出 3 条"如果没有 skill 就会犯的错误"。每条须包含：

- 错误的做法
- 可能的后果/bug
- skill 中哪行/哪段阻止了它（附引语）

若凑不出 3 条，说明原因并提出一个更难的任务变体。

**D. 缺口**

列出 skill 和参考文件中缺失的信息：

- 导致你标记 `unknown` 的缺失信息
- 可能导致 bug 的歧义
- 你希望补充的内容

**E. 上下文泄漏审计**

如实作答：

- 你是否读取了不在允许源列表中的文件？若是，列出文件路径及原因。
- 你是否使用了 `skill()` 工具？若是，加载了哪个 skill？
- 你是否从 AGENTS.md 或 CLAUDE.md 中获得了与任务相关的信息？若是，具体是什么？
- 你是否使用了训练数据中的知识，而该知识在允许源中找不到？若是，涉及哪些元素？
